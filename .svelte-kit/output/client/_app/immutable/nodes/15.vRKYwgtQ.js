import{p as ge,h as S,a1 as xe,T as _e,i as L,d as v,e as fe,V as me,v as y,g as e,w as p,m as g,c as o,l as r,$ as he,R as j,q as O,r as t,H as ye,s as c,f as X,D as Y,a9 as be,x as R}from"../chunks/euVeJPvK.js";import{B as V}from"../chunks/Be_B613E.js";import{C as I}from"../chunks/BCY0rcL3.js";var ke=g('<p class="text-red-600 text-sm mt-2">Ustaw <code class="bg-red-100 px-2 py-1 rounded">BASELINKER_API_TOKEN</code> w pliku <code class="bg-red-100 px-2 py-1 rounded">.env</code></p>'),$e=g('<div class="bg-red-50 border border-red-200 rounded-lg p-4"><div class="flex items-center"><svg class="w-5 h-5 text-red-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <p class="text-red-800"> </p></div> <!></div>'),we=g('<div class="flex items-center gap-3"><div class="w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center"><svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"></path></svg></div> <div><p class="text-sm text-gray-600">Status połączenia</p> <p> </p></div></div>'),je=g('<div class="flex items-center gap-3"><div class="w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center"><svg class="w-5 h-5 text-accent-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path></svg></div> <div><p class="text-sm text-gray-600">Katalogi</p> <p class="font-semibold text-gray-900"> </p></div></div>'),ze=g('<div class="flex items-center gap-3"><div class="w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center"><svg class="w-5 h-5 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg></div> <div><p class="text-sm text-gray-600">Ostatnia synchronizacja</p> <p class="font-semibold text-gray-900"> </p></div></div>'),Pe=g("<option> </option>"),Be=g('<h3 class="text-lg font-semibold text-gray-900 mb-4">Synchronizacja produktów</h3> <div class="space-y-4"><div><label for="inventory-select" class="block text-sm font-medium text-gray-700 mb-1">Wybierz katalog BaseLinker</label> <select id="inventory-select" class="w-full rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"></select></div> <div class="flex gap-3"><!> <!></div></div>',1),Se=g('<li class="text-sm text-red-700"> </li>'),Ie=g('<div class="mt-4"><h4 class="text-sm font-medium text-red-800 mb-2">Błędy:</h4> <ul class="bg-red-50 rounded-lg p-3 space-y-1"></ul></div>'),Ae=g('<h3 class="text-lg font-semibold text-gray-900 mb-4">Wynik synchronizacji</h3> <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-4"><div class="bg-green-50 rounded-lg p-3 text-center"><p class="text-2xl font-bold text-green-600"> </p> <p class="text-sm text-green-700">Dodanych</p></div> <div class="bg-blue-50 rounded-lg p-3 text-center"><p class="text-2xl font-bold text-blue-600"> </p> <p class="text-sm text-blue-700">Zaktualizowanych</p></div> <div class="bg-gray-50 rounded-lg p-3 text-center"><p class="text-2xl font-bold text-gray-600"> </p> <p class="text-sm text-gray-700">Pominiętych</p></div> <div class="bg-red-50 rounded-lg p-3 text-center"><p class="text-2xl font-bold text-red-600"> </p> <p class="text-sm text-red-700">Błędów</p></div></div> <!>',1),Le=g('<h3 class="text-lg font-semibold text-gray-900 mb-3">Konfiguracja BaseLinker</h3> <div class="prose prose-sm text-gray-600"><ol class="space-y-2"><li>Zaloguj się do <a href="https://baselinker.com" target="_blank" rel="noopener" class="text-blue-600 hover:underline">BaseLinker</a></li> <li>Przejdź do <strong>Moje konto → API</strong></li> <li>Wygeneruj nowy token API</li> <li>Dodaj token do pliku <code class="bg-gray-200 px-2 py-1 rounded">.env</code>: <pre class="bg-gray-800 text-gray-100 rounded-lg p-3 mt-2">BASELINKER_API_TOKEN=twoj_token_api</pre></li> <li>Kliknij "Pobierz katalogi" aby zweryfikować połączenie</li></ol></div>',1),Me=g('<div class="space-y-6"><div class="flex justify-between items-center"><div><h2 class="text-2xl font-bold text-gray-900">Integracja BaseLinker</h2> <p class="text-gray-600 mt-1">Synchronizuj produkty i zarządzaj zamówieniami przez BaseLinker</p></div> <!></div> <!> <div class="grid grid-cols-1 md:grid-cols-3 gap-4"><!> <!> <!></div> <!> <!> <!></div>');function De(ee,te){ge(te,!0);let $=S(xe([])),w=S(null),z=S(!1),M=S(!1),x=S(null),b=S(null);async function re(){c(M,!0),c(b,null);try{const l=await(await fetch("/api/baselinker/sync")).json();l.error?c(b,l.error,!0):(c($,l.inventories||[],!0),e($).length>0&&!e(w)&&c(w,e($)[0].inventory_id,!0))}catch(a){c(b,a.message||"Nie udało się pobrać katalogów",!0)}finally{c(M,!1)}}async function W(a=!1){if(e(w)){c(z,!0),c(x,null),c(b,null);try{const s=await(await fetch("/api/baselinker/sync",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({inventoryId:e(w),dryRun:a})})).json();s.error?c(b,s.error,!0):c(x,s,!0)}catch(l){c(b,l.message||"Synchronizacja nie powiodła się",!0)}finally{c(z,!1)}}}var C=Me();_e("eri0jz",a=>{me(()=>{he.title="BaseLinker - Admin | FixTar"})});var K=r(C),ae=o(r(K),2);V(ae,{onclick:re,get disabled(){return e(M)},children:(a,l)=>{j();var s=O();y(()=>p(s,e(M)?"Ładowanie...":"Pobierz katalogi")),v(a,s)},$$slots:{default:!0}}),t(K);var U=o(K,2);{var se=a=>{var l=$e(),s=r(l),n=o(r(s),2),i=r(n,!0);t(n),t(s);var d=o(s,2);{var f=m=>{var B=ke();v(m,B)},P=R(()=>e(b).includes("API token"));L(d,m=>{e(P)&&m(f)})}t(l),y(()=>p(i,e(b))),v(a,l)};L(U,a=>{e(b)&&a(se)})}var N=o(U,2),Z=r(N);I(Z,{class:"p-4",children:(a,l)=>{var s=we(),n=o(r(s),2),i=o(r(n),2),d=r(i,!0);t(i),t(n),t(s),y(()=>{ye(i,1,`font-semibold ${e($).length>0?"text-green-600":"text-gray-400"}`),p(d,e($).length>0?"Połączono":"Nie połączono")}),v(a,s)},$$slots:{default:!0}});var q=o(Z,2);I(q,{class:"p-4",children:(a,l)=>{var s=je(),n=o(r(s),2),i=o(r(n),2),d=r(i,!0);t(i),t(n),t(s),y(()=>p(d,e($).length)),v(a,s)},$$slots:{default:!0}});var oe=o(q,2);I(oe,{class:"p-4",children:(a,l)=>{var s=ze(),n=o(r(s),2),i=o(r(n),2),d=r(i,!0);t(i),t(n),t(s),y(f=>p(d,f),[()=>e(x)?.timestamp?new Date(e(x).timestamp).toLocaleString("pl-PL"):"Brak"]),v(a,s)},$$slots:{default:!0}}),t(N);var F=o(N,2);{var le=a=>{I(a,{class:"p-6",children:(l,s)=>{var n=Be(),i=o(X(n),2),d=r(i),f=o(r(d),2);Y(f,20,()=>e($),_=>_,(_,u)=>{var h=Pe(),k=r(h);t(h);var A={};y(()=>{p(k,`${u.name??""} (ID: ${u.inventory_id??""})`),A!==(A=u.inventory_id)&&(h.value=(h.__value=u.inventory_id)??"")}),v(_,h)}),t(f),t(d);var P=o(d,2),m=r(P);{let _=R(()=>e(z)||!e(w));V(m,{onclick:()=>W(!0),get disabled(){return e(_)},variant:"outline",children:(u,h)=>{j();var k=O();y(()=>p(k,e(z)?"Sprawdzanie...":"Podgląd (Dry Run)")),v(u,k)},$$slots:{default:!0}})}var B=o(m,2);{let _=R(()=>e(z)||!e(w));V(B,{onclick:()=>W(!1),get disabled(){return e(_)},variant:"primary",children:(u,h)=>{j();var k=O();y(()=>p(k,e(z)?"Synchronizuję...":"Synchronizuj produkty")),v(u,k)},$$slots:{default:!0}})}t(P),t(i),be(f,()=>e(w),_=>c(w,_)),v(l,n)},$$slots:{default:!0}})};L(F,a=>{e($).length>0&&a(le)})}var J=o(F,2);{var ie=a=>{I(a,{class:"p-6",children:(l,s)=>{var n=Ae(),i=o(X(n),2),d=r(i),f=r(d),P=r(f,!0);t(f),j(2),t(d);var m=o(d,2),B=r(m),_=r(B,!0);t(B),j(2),t(m);var u=o(m,2),h=r(u),k=r(h,!0);t(h),j(2),t(u);var A=o(u,2),G=r(A),de=r(G,!0);t(G),j(2),t(A),t(i);var ve=o(i,2);{var ce=D=>{var E=Ie(),Q=o(r(E),2);Y(Q,20,()=>e(x).errors,T=>T,(T,pe)=>{var H=Se(),ue=r(H);t(H),y(()=>p(ue,`• ${pe??""}`)),v(T,H)}),t(Q),t(E),v(D,E)};L(ve,D=>{e(x).errors.length>0&&D(ce)})}y(()=>{p(P,e(x).productsAdded),p(_,e(x).productsUpdated),p(k,e(x).productsSkipped),p(de,e(x).errors.length)}),v(l,n)},$$slots:{default:!0}})};L(J,a=>{e(x)&&a(ie)})}var ne=o(J,2);I(ne,{class:"p-6 bg-gray-50",children:(a,l)=>{var s=Le();j(2),v(a,s)},$$slots:{default:!0}}),t(C),v(ee,C),fe()}export{De as component};
