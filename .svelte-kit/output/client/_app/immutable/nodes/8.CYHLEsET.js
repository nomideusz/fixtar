import{z as ne,p as ue,h as Y,a1 as ve,b as ce,T as fe,i as F,d as l,e as me,V as pe,m,c as d,$ as he,l as s,R as M,q as D,r,g as n,x as I,v as T,w as h,D as ge,f as xe,W as _e,a2 as ye,s as y,a3 as be,I as ke,a4 as we,K as $e,S as Ae}from"../chunks/euVeJPvK.js";import{C as E}from"../chunks/BCY0rcL3.js";import{B as b}from"../chunks/Be_B613E.js";import{n as g}from"../chunks/BCUCx8Q8.js";var Me=m('<meta name="description" content="Manage your shipping addresses"/>'),De=m('<div class="text-center py-12"><svg class="w-16 h-16 mx-auto mb-4 text-red-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <h3 class="text-lg font-medium text-gray-900 mb-2">Error loading addresses</h3> <p class="text-gray-600 mb-6"> </p> <!></div>'),Pe=m('<div class="text-center py-12"><svg class="w-16 h-16 mx-auto mb-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path></svg> <h3 class="text-lg font-medium text-gray-900 mb-2">No addresses saved</h3> <p class="text-gray-600 mb-6">Add an address to make checkout faster.</p> <!></div>'),Se=m('<span class="px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full">Default</span>'),je=Ae('<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg>'),ze=m('<div class="flex justify-between items-start mb-4"><div><h3 class="font-semibold text-gray-900 flex items-center gap-2"> <!></h3></div> <div class="flex gap-2"><!> <button class="p-1 text-gray-400 hover:text-red-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed" aria-label="Delete address"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button> <form method="POST" action="?/removeAddress" style="display: none;"><input type="hidden" name="id"/></form></div></div> <div class="text-sm text-gray-600 space-y-1 mb-4"><p> </p> <p> </p> <p> </p></div> <!>',1),Be=m('<div class="grid grid-cols-1 md:grid-cols-2 gap-6"></div>'),Ce=m('<div><div class="flex justify-between items-center mb-6"><h1 class="text-2xl font-bold text-gray-900">My Addresses</h1> <!></div> <!></div>');function Le(K,u){ue(u,!0);let x=Y(ve(u.data.addresses||[])),v=Y(!1);const R=I(()=>!!u.data.error),G=I(()=>u.data.error||"");ce(()=>{u.form?.success?(g.success("Action completed successfully"),window.location.reload()):u.form?.message&&g.error(u.form.message)});function J(t){y(v,!0);const a=new FormData;a.append("id",t),fetch("?/setDefaultAddress",{method:"POST",body:a}).then(i=>{i.ok?(y(x,n(x).map(e=>({...e,default:e.id===t})),!0),g.success("Default address updated")):g.error("Failed to update default address")}).catch(i=>{console.error("Error setting default address:",i),g.error("Failed to update default address")}).finally(()=>{y(v,!1)})}function Q(t){if(n(x).length===1){g.error("You must have at least one address");return}if(!confirm("Are you sure you want to delete this address?"))return;const a=document.getElementById(`delete-form-${t}`);a&&a.requestSubmit()}var P=Ce();fe("1dgo0tb",t=>{var a=Me();pe(()=>{he.title="My Addresses - FixTar"}),l(t,a)});var S=s(P),U=d(s(S),2);b(U,{href:"/account/addresses/new",children:(t,a)=>{M();var i=D("Add New Address");l(t,i)},$$slots:{default:!0}}),r(S);var X=d(S,2);{var Z=t=>{E(t,{children:(a,i)=>{var e=De(),c=d(s(e),4),k=s(c,!0);r(c);var _=d(c,2);b(_,{onclick:()=>window.location.reload(),children:(f,w)=>{M();var $=D("Try Again");l(f,$)},$$slots:{default:!0}}),r(e),T(()=>h(k,n(G))),l(a,e)},$$slots:{default:!0}})},ee=t=>{E(t,{children:(a,i)=>{var e=Pe(),c=d(s(e),6);b(c,{href:"/account/addresses/new",children:(k,_)=>{M();var f=D("Add Your First Address");l(k,f)},$$slots:{default:!0}}),r(e),l(a,e)},$$slots:{default:!0}})},te=t=>{var a=Be();ge(a,20,()=>n(x),i=>i,(i,e)=>{E(i,{children:(c,k)=>{var _=ze(),f=xe(_),w=s(f),$=s(w),H=s($),ae=d(H);{var re=o=>{var p=Se();l(o,p)};F(ae,o=>{e.default&&o(re)})}r($),r(w);var L=d(w,2),q=s(L);b(q,{get href(){return`/account/addresses/${e.id??""}/edit`},variant:"ghost",size:"sm",children:(o,p)=>{var V=je();l(o,V)},$$slots:{default:!0}});var j=d(q,2),A=d(j,2),N=s(A);_e(N),r(A),ye(A,(o,p)=>be?.(o,p),()=>()=>(y(v,!0),async({update:o})=>{y(v,!1),await o()})),r(L),r(f);var z=d(f,2),B=s(z),se=s(B,!0);r(B);var C=d(B,2),oe=s(C);r(C);var O=d(C,2),de=s(O,!0);r(O),r(z);var le=d(z,2);{var ie=o=>{b(o,{onclick:()=>J(e.id),get disabled(){return n(v)},variant:"secondary",size:"sm",fullWidth:!0,children:(p,V)=>{M();var W=D();T(()=>h(W,n(v)?"Setting...":"Set as Default")),l(p,W)},$$slots:{default:!0}})};F(le,o=>{e.default||o(ie)})}T(()=>{h(H,`${(e.type||"Address")??""} `),j.disabled=n(v),ke(A,"id",`delete-form-${e.id??""}`),we(N,e.id),h(se,e.street),h(oe,`${e.city??""} ${e.postalCode??""}`),h(de,e.country)}),$e("click",j,()=>Q(e.id)),l(c,_)},$$slots:{default:!0}})}),r(a),l(t,a)};F(X,t=>{n(R)?t(Z):n(x).length===0?t(ee,1):t(te,!1)})}r(P),l(K,P),me()}ne(["click"]);export{Le as component};
