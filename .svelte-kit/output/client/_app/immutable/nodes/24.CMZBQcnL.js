import{z as tt,p as at,b as he,a1 as Le,h as we,g as e,s as oe,Y as rt,T as st,f as U,i as T,d as l,e as it,E as lt,V as ot,m as n,$ as nt,c as r,l as a,r as t,F as dt,R as ue,q as He,D as be,v as j,w as g,a5 as vt,H as pe,a6 as ct,K as ye,W as Pe,aa as ut,a4 as Te,a7 as Ie,ad as pt,I as We,j as mt,a2 as ft,a3 as ht,x as ge,S as Ve}from"../chunks/euVeJPvK.js";import{c as Ne}from"../chunks/BCUCx8Q8.js";import{B as Se}from"../chunks/Be_B613E.js";import{I as Q}from"../chunks/DHlvweli.js";import{C as ne}from"../chunks/BCY0rcL3.js";import{H as gt}from"../chunks/B9QY4uHP.js";var xt=n('<meta name="description" content="Bezpieczna finalizacja zamówienia - wypełnij dane dostawy i płatności"/>'),_t=n('<div class="w-20 h-20 bg-neutral-100 rounded-3xl flex items-center justify-center mx-auto mb-8"><svg class="w-10 h-10 text-neutral-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"></path></svg></div> <h2 class="text-3xl font-bold text-neutral-900 mb-4">Twój koszyk jest pusty</h2> <p class="text-lg text-neutral-600 mb-8">Dodaj produkty do koszyka, aby przejść do finalizacji zamówienia</p> <div class="flex flex-col sm:flex-row gap-4 justify-center"><!> <!></div>',1),wt=n('<div class="flex items-center mb-6"><div class="w-8 h-8 bg-brand-100 rounded-lg flex items-center justify-center mr-3"><svg class="w-4 h-4 text-brand-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"></path></svg></div> <h2 class="text-2xl font-bold text-neutral-900">Dane kontaktowe</h2></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-6"><!> <!></div>',1),bt=n("<option> </option>"),yt=n('<p class="mt-2 text-sm text-red-600"> </p>'),kt=n('<label class="flex items-center"><input type="checkbox" name="saveAddress" class="rounded border-neutral-300 text-emerald-600 shadow-sm focus:ring-emerald-500 h-4 w-4"/> <span class="ml-3 text-sm font-medium text-neutral-700">Zapisz adres do przyszłych zamówień</span></label>'),zt=n('<div class="flex items-center mb-6"><div class="w-8 h-8 bg-emerald-100 rounded-lg flex items-center justify-center mr-3"><svg class="w-4 h-4 text-emerald-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path></svg></div> <h2 class="text-2xl font-bold text-neutral-900">Adres dostawy</h2></div> <div class="space-y-6"><div class="grid grid-cols-1 md:grid-cols-2 gap-6"><!> <!></div> <!> <div class="grid grid-cols-1 md:grid-cols-3 gap-6"><div class="md:col-span-2"><!></div> <!></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-6"><!> <div><label for="voivodeship" class="block text-sm font-semibold text-neutral-700 mb-2">Województwo</label> <select id="voivodeship" name="voivodeship" required=""><option>Wybierz województwo</option><!></select> <!></div></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-6"><!> <!></div> <!></div>',1),jt=n('<div class="w-2 h-2 bg-purple-600 rounded-full absolute top-0.5 left-0.5"></div>'),Mt=n('<div class="flex items-center mt-2"><svg class="w-4 h-4 text-neutral-400 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span class="text-sm text-neutral-500"> </span></div>'),Ct=n('<div class="text-lg font-bold text-green-600">Darmowa</div> <div class="text-sm text-neutral-500 line-through"> </div>',1),Pt=n('<div class="text-xs text-neutral-500"> </div>'),Tt=n('<div class="text-lg font-bold text-neutral-900"> </div> <!>',1),Nt=n('<label><input type="radio" name="shippingMethod" class="sr-only"/> <div class="flex items-start p-6"><div class="flex-shrink-0 mt-1"><div><!></div></div> <div class="ml-4 flex-1"><div class="flex justify-between items-start"><div><h3 class="text-lg font-bold text-neutral-900"> </h3> <p class="text-sm text-neutral-600 mt-1"> </p> <!></div> <div class="text-right"><!></div></div></div></div></label>'),St=n('<div class="space-y-4"></div>'),Bt=n('<div class="text-center py-8"><div class="w-12 h-12 bg-neutral-100 rounded-xl flex items-center justify-center mx-auto mb-4"><svg class="w-6 h-6 text-neutral-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg></div> <p class="text-neutral-500">Brak dostępnych metod dostawy. Skontaktuj się z obsługą.</p></div>'),Ft=n('<p class="mt-3 text-sm text-red-600"> </p>'),qt=n('<div class="flex items-center mb-6"><div class="w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center mr-3"><svg class="w-4 h-4 text-accent-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"></path></svg></div> <h2 class="text-2xl font-bold text-neutral-900">Metoda dostawy</h2></div> <!> <!>',1),Dt=n('<div class="w-2 h-2 bg-orange-600 rounded-full absolute top-0.5 left-0.5"></div>'),At=n('<div class="text-right"><div class="text-sm text-neutral-600"> </div></div>'),Lt=n('<label><input type="radio" name="paymentMethod" class="sr-only"/> <div class="flex items-start p-6"><div class="flex-shrink-0 mt-1"><div><!></div></div> <div class="ml-4 flex-1"><div class="flex justify-between items-start"><div><h3 class="text-lg font-bold text-neutral-900"> </h3> <p class="text-sm text-neutral-600 mt-1"> </p></div> <!></div></div></div></label>'),Ht=n('<div class="space-y-4"></div>'),It=n('<div class="text-center py-8"><div class="w-12 h-12 bg-neutral-100 rounded-xl flex items-center justify-center mx-auto mb-4"><svg class="w-6 h-6 text-neutral-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg></div> <p class="text-neutral-500">Brak dostępnych metod płatności. Skontaktuj się z obsługą.</p></div>'),Wt=n('<p class="mt-3 text-sm text-red-600"> </p>'),Vt=n('<div class="flex items-center mb-6"><div class="w-8 h-8 bg-orange-100 rounded-lg flex items-center justify-center mr-3"><svg class="w-4 h-4 text-orange-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"></path></svg></div> <h2 class="text-2xl font-bold text-neutral-900">Metoda płatności</h2></div> <!> <!>',1),Ot=n('<div class="flex items-center mb-6"><div class="w-8 h-8 bg-neutral-100 rounded-lg flex items-center justify-center mr-3"><svg class="w-4 h-4 text-neutral-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg></div> <h2 class="text-2xl font-bold text-neutral-900">Dodatkowe informacje</h2></div> <textarea name="notes" placeholder="Uwagi do zamówienia, specjalne instrukcje dostawy (opcjonalnie)" rows="4" class="w-full px-4 py-3 border border-neutral-300 rounded-xl shadow-sm focus:ring-2 focus:ring-brand-500 focus:border-brand-500 transition-colors resize-none"></textarea>',1),Ut=n('<div class="w-16 h-16 rounded-lg overflow-hidden flex-shrink-0"><img class="w-full h-full object-cover"/></div>'),Xt=n('<div class="w-16 h-16 bg-gray-200 rounded-lg flex items-center justify-center flex-shrink-0"><svg class="w-8 h-8 text-neutral-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg></div>'),Kt=n('<div class="flex items-center space-x-4 p-4 bg-neutral-50 rounded-xl"><!> <div class="flex-1 min-w-0"><h3 class="text-sm font-semibold text-neutral-900 truncate"> </h3> <p class="text-sm text-neutral-600"> </p> <p class="text-sm font-bold text-brand-600"> </p></div></div>'),Zt=n('<div class="flex justify-between text-sm"><span class="text-neutral-600">Opłata za płatność</span> <span class="font-semibold text-neutral-900"> </span></div>'),$t=Ve('<svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-white" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Przetwarzanie zamówienia...',1),Rt=Ve('<svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> Złóż zamówienie',1),Et=n('<h2 class="text-2xl font-bold text-neutral-900 mb-6">Podsumowanie zamówienia</h2> <div class="space-y-4 mb-6"></div> <div class="border-t border-neutral-200 pt-6 space-y-4"><div class="flex justify-between text-sm"><span class="text-neutral-600">Suma częściowa</span> <span class="font-semibold text-neutral-900"> </span></div> <div class="flex justify-between text-sm"><span class="text-neutral-600">Dostawa</span> <span> </span></div> <!> <div class="flex justify-between text-sm"><span class="text-neutral-600">VAT (23%)</span> <span class="font-semibold text-neutral-900"> </span></div> <div class="flex justify-between text-xl font-bold pt-4 border-t border-neutral-200"><span class="text-neutral-900">Do zapłaty</span> <span class="text-brand-600"> </span></div></div> <!> <div class="mt-6 p-4 bg-neutral-50 rounded-xl"><div class="flex items-center text-sm text-neutral-600 mb-3"><svg class="w-4 h-4 mr-2 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path></svg> Bezpieczne szyfrowane połączenie SSL</div> <div class="text-xs text-neutral-500 space-y-1"><p>Składając zamówienie, akceptujesz nasz</p> <p><a href="/regulamin" class="underline hover:text-neutral-700 font-medium">Regulamin</a> <a href="/polityka-prywatnosci" class="underline hover:text-neutral-700 font-medium">Politykę prywatności</a></p></div></div>',1),Jt=n('<div class="mb-12"><div class="flex items-center justify-center space-x-4"><div class="flex items-center"><div class="w-10 h-10 bg-brand-600 text-white rounded-full flex items-center justify-center font-bold text-sm">1</div> <span class="ml-3 text-sm font-medium text-brand-600">Koszyk</span></div> <div class="w-16 h-1 bg-brand-600 rounded"></div> <div class="flex items-center"><div class="w-10 h-10 bg-brand-600 text-white rounded-full flex items-center justify-center font-bold text-sm">2</div> <span class="ml-3 text-sm font-medium text-brand-600">Finalizacja</span></div> <div class="w-16 h-1 bg-gray-300 rounded"></div> <div class="flex items-center"><div class="w-10 h-10 bg-gray-300 text-neutral-500 rounded-full flex items-center justify-center font-bold text-sm">3</div> <span class="ml-3 text-sm font-medium text-neutral-500">Potwierdzenie</span></div></div></div> <form method="POST" action="?/placeOrder" class="grid grid-cols-1 xl:grid-cols-3 gap-8"><div class="xl:col-span-2 space-y-8"><!> <!> <!> <!> <!></div> <div class="xl:col-span-1"><div class="sticky top-8"><!></div></div></form>',1),Yt=n('<div class="fixed bottom-6 right-6 bg-red-500 text-white px-6 py-4 rounded-xl shadow-2xl flex items-center space-x-3 max-w-md z-50"><svg class="w-5 h-5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg> <span class="font-medium"> </span></div>'),Gt=n('<!> <div class="bg-neutral-50 min-h-screen"><div class="max-w-screen-2xl mx-auto px-6 sm:px-8 lg:px-12 py-16"><!></div></div> <!>',1);function ia(Oe,d){at(d,!0);const me=()=>dt(Ne,"$cart",Ue),[Ue,Xe]=lt();he(()=>{console.log("Checkout page data:",{shippingMethods:d.data.shippingMethods,paymentMethods:d.data.paymentMethods,addresses:d.data.addresses,user:d.data.user})});let s=Le({email:"",firstName:"",lastName:"",company:"",street:"",apartment:"",city:"",voivodeship:"",postalCode:"",phone:"",nip:"",paymentMethod:"",shippingMethod:"",notes:"",useShippingAsBilling:!0,saveAddress:!1});he(()=>{d.data.user?.email&&(s.email=d.data.user.email);const f=d.data.addresses?.find(C=>C.default);f&&(s.street=f.street||"",s.city=f.city||"",s.postalCode=f.postalCode||"")});let xe=we(!1),v=we(Le({})),A=we(null),M=we(null);he(()=>{!e(A)&&d.data.shippingMethods&&d.data.shippingMethods.length>0&&oe(A,d.data.shippingMethods[0],!0),!e(M)&&d.data.paymentMethods&&d.data.paymentMethods.length>0&&oe(M,d.data.paymentMethods[0],!0)}),he(()=>{e(A)&&(s.shippingMethod=e(A).id,console.log("Selected shipping:",e(A).id,s.shippingMethod)),e(M)&&(s.paymentMethod=e(M).code||e(M).id,console.log("Selected payment:",e(M).code||e(M).id,s.paymentMethod))});let ie=ge(()=>me().reduce((f,C)=>f+C.price*C.quantity,0)),fe=ge(()=>e(A)?e(A).freeShippingThreshold&&e(ie)>=e(A).freeShippingThreshold?0:e(A).cost||0:0),ke=ge(()=>e(M)&&e(M).processingFee?e(M).feeType==="percentage"?e(ie)*(e(M).processingFee/100):e(M).processingFee:0),ze=ge(()=>e(ie)*.23),Be=ge(()=>e(ie)+e(fe)+e(ke)+e(ze));function Ke(){return oe(v,{},!0),me().length===0?(e(v).cart="Koszyk jest pusty",!1):((!s.email||!s.email.includes("@"))&&(e(v).email="Podaj prawidłowy adres email"),s.firstName||(e(v).firstName="Imię jest wymagane"),s.lastName||(e(v).lastName="Nazwisko jest wymagane"),s.street||(e(v).street="Ulica jest wymagana"),s.city||(e(v).city="Miasto jest wymagane"),s.voivodeship||(e(v).voivodeship="Województwo jest wymagane"),(!s.postalCode||!/^\d{2}-\d{3}$/.test(s.postalCode))&&(e(v).postalCode="Podaj kod pocztowy w formacie XX-XXX"),(!s.phone||!/^[\d\s\+\-\(\)]+$/.test(s.phone))&&(e(v).phone="Podaj prawidłowy numer telefonu"),s.nip&&!/^\d{10}$/.test(s.nip.replace(/\D/g,""))&&(e(v).nip="Podaj prawidłowy NIP (10 cyfr)"),s.paymentMethod||(e(v).paymentMethod="Wybierz metodę płatności"),s.shippingMethod||(e(v).shippingMethod="Wybierz metodę dostawy"),Object.keys(e(v)).length===0)}function Ze(f){let h=f.currentTarget.value.replace(/\D/g,"");h.length>=2&&(h=h.slice(0,2)+"-"+h.slice(2,5)),s.postalCode=h}function $e(f){let h=f.currentTarget.value.replace(/\D/g,"");if(h.length>0&&!h.startsWith("48")&&(h="48"+h),h.length>2){const $=h.slice(0,2),V=h.slice(2);let R="+"+$;V.length>0&&(R+=" "+V.slice(0,3),V.length>3&&(R+=" "+V.slice(3,6),V.length>6&&(R+=" "+V.slice(6,9)))),s.phone=R}else s.phone=h}he(()=>{d.form?.success&&d.form?.redirectUrl?(Ne.clear(),rt(d.form.redirectUrl)):d.form?.message&&console.error("Checkout error:",d.form.message)});var Fe=Gt();st("jbcej5",f=>{var C=xt();ot(()=>{nt.title="Finalizacja Zamówienia - FixTar"}),l(f,C)});var qe=U(Fe);gt(qe,{title:"Finalizacja Zamówienia",subtitle:"Bezpiecznie sfinalizuj swoje zakupy - potrzebujesz tylko kilku kliknięć",centered:!0,className:"bg-gradient-to-br from-emerald-50 via-white to-brand-50"});var je=r(qe,2),De=a(je),Re=a(De);{var Ee=f=>{ne(f,{class:"p-16 text-center max-w-2xl mx-auto",children:(C,h)=>{var $=_t(),V=r(U($),6),R=a(V);Se(R,{href:"/products",class:"text-lg px-8 py-4",children:(de,Me)=>{ue();var ve=He("Przeglądaj produkty");l(de,ve)},$$slots:{default:!0}});var _e=r(R,2);Se(_e,{href:"/",variant:"outline",class:"text-lg px-8 py-4",children:(de,Me)=>{ue();var ve=He("Wróć do strony głównej");l(de,ve)},$$slots:{default:!0}}),t(V),l(C,$)},$$slots:{default:!0}})},Je=f=>{var C=Jt(),h=r(U(C),2),$=a(h),V=a($);ne(V,{class:"p-8",children:(w,L)=>{var b=wt(),y=r(U(b),2),N=a(y);Q(N,{type:"email",label:"Adres email",name:"email",get value(){return s.email},oninput:E=>s.email=E.currentTarget.value,get error(){return e(v).email},required:!0,placeholder:"jan.kowalski@example.com",class:"focus:ring-2 focus:ring-brand-500"});var O=r(N,2);Q(O,{type:"tel",label:"Numer telefonu",name:"phone",get value(){return s.phone},oninput:$e,get error(){return e(v).phone},required:!0,placeholder:"+48 123 456 789",class:"focus:ring-2 focus:ring-brand-500"}),t(y),l(w,b)},$$slots:{default:!0}});var R=r(V,2);ne(R,{class:"p-8",children:(w,L)=>{var b=zt(),y=r(U(b),2),N=a(y),O=a(N);Q(O,{label:"Imię",name:"firstName",get value(){return s.firstName},oninput:i=>s.firstName=i.currentTarget.value,get error(){return e(v).firstName},required:!0,class:"focus:ring-2 focus:ring-emerald-500"});var E=r(O,2);Q(E,{label:"Nazwisko",name:"lastName",get value(){return s.lastName},oninput:i=>s.lastName=i.currentTarget.value,get error(){return e(v).lastName},required:!0,class:"focus:ring-2 focus:ring-emerald-500"}),t(N);var te=r(N,2);Q(te,{label:"Firma (opcjonalnie)",name:"company",get value(){return s.company},oninput:i=>s.company=i.currentTarget.value,placeholder:"Nazwa firmy",class:"focus:ring-2 focus:ring-emerald-500"});var c=r(te,2),u=a(c),B=a(u);Q(B,{label:"Ulica i numer domu",name:"street",get value(){return s.street},oninput:i=>s.street=i.currentTarget.value,get error(){return e(v).street},required:!0,placeholder:"ul. Przykładowa 123",class:"focus:ring-2 focus:ring-emerald-500"}),t(u);var o=r(u,2);Q(o,{label:"Nr lokalu",name:"apartment",get value(){return s.apartment},oninput:i=>s.apartment=i.currentTarget.value,placeholder:"10",class:"focus:ring-2 focus:ring-emerald-500"}),t(c);var F=r(c,2),z=a(F);Q(z,{label:"Miasto",name:"city",get value(){return s.city},oninput:i=>s.city=i.currentTarget.value,get error(){return e(v).city},required:!0,placeholder:"Warszawa",class:"focus:ring-2 focus:ring-emerald-500"});var X=r(z,2),k=r(a(X),2),H=a(k);H.value=H.__value="";var ae=r(H);be(ae,16,()=>d.data.voivodeships,i=>i,(i,m)=>{var p=bt(),q=a(p,!0);t(p);var P={};j(()=>{g(q,m),P!==(P=m)&&(p.value=(p.__value=m)??"")}),l(i,p)}),t(k);var re;vt(k);var J=r(k,2);{var Y=i=>{var m=yt(),p=a(m,!0);t(m),j(()=>g(p,e(v).voivodeship)),l(i,m)};T(J,i=>{e(v).voivodeship&&i(Y)})}t(X),t(F);var I=r(F,2),W=a(I);Q(W,{label:"Kod pocztowy",name:"postalCode",get value(){return s.postalCode},oninput:Ze,get error(){return e(v).postalCode},required:!0,placeholder:"00-001",maxlength:6,class:"focus:ring-2 focus:ring-emerald-500"});var le=r(W,2);Q(le,{label:"NIP (dla faktury)",name:"nip",get value(){return s.nip},oninput:i=>s.nip=i.currentTarget.value,get error(){return e(v).nip},placeholder:"1234567890",class:"focus:ring-2 focus:ring-emerald-500"}),t(I);var x=r(I,2);{var _=i=>{var m=kt(),p=a(m);Pe(p),ue(2),t(m),ut(p,()=>s.saveAddress,q=>s.saveAddress=q),l(i,m)};T(x,i=>{d.data.user&&i(_)})}t(y),j(()=>{pe(k,1,`w-full px-4 py-3 border border-neutral-300 rounded-xl shadow-sm focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition-colors ${e(v).voivodeship?"border-red-300 focus:ring-red-500":""}`),re!==(re=s.voivodeship)&&(k.value=(k.__value=s.voivodeship)??"",ct(k,s.voivodeship))}),ye("change",k,i=>s.voivodeship=i.currentTarget.value),l(w,b)},$$slots:{default:!0}});var _e=r(R,2);ne(_e,{class:"p-8",children:(w,L)=>{var b=qt(),y=r(U(b),2);{var N=c=>{var u=St();be(u,20,()=>d.data.shippingMethods,B=>B,(B,o)=>{var F=Nt(),z=a(F);Pe(z);var X=r(z,2),k=a(X),H=a(k),ae=a(H);{var re=S=>{var D=jt();l(S,D)};T(ae,S=>{e(A)?.id===o.id&&S(re)})}t(H),t(k);var J=r(k,2),Y=a(J),I=a(Y),W=a(I),le=a(W,!0);t(W);var x=r(W,2),_=a(x,!0);t(x);var i=r(x,2);{var m=S=>{var D=Mt(),Z=r(a(D),2),se=a(Z);t(Z),t(D),j(()=>g(se,`Dostawa: ${o.estimatedDeliveryDays??""} dni roboczych`)),l(S,D)};T(i,S=>{o.estimatedDeliveryDays&&S(m)})}t(I);var p=r(I,2),q=a(p);{var P=S=>{var D=Ct(),Z=r(U(D),2),se=a(Z);t(Z),j(()=>g(se,`${o.cost??""} zł`)),l(S,D)},K=S=>{var D=Tt(),Z=U(D),se=a(Z);t(Z);var Ce=r(Z,2);{var G=ee=>{var ce=Pt(),et=a(ce);t(ce),j(()=>g(et,`Darmowa od ${o.freeShippingThreshold??""} zł`)),l(ee,ce)};T(Ce,ee=>{o.freeShippingThreshold&&ee(G)})}j(()=>g(se,`${o.cost??""} zł`)),l(S,D)};T(q,S=>{o.freeShippingThreshold&&e(ie)>=o.freeShippingThreshold?S(P):S(K,!1)})}t(p),t(Y),t(J),t(X),t(F),j(()=>{pe(F,1,`shipping-method-card ${e(A)?.id===o.id?"selected":""}`,"svelte-jbcej5"),Te(z,o.id),Ie(z,e(A)?.id===o.id),pe(H,1,`w-4 h-4 border-2 border-neutral-300 rounded-full relative ${e(A)?.id===o.id?"border-purple-600":""}`),g(le,o.name),g(_,o.description)}),ye("change",z,()=>oe(A,o,!0)),l(B,F)}),t(u),l(c,u)},O=c=>{var u=Bt();l(c,u)};T(y,c=>{d.data.shippingMethods&&d.data.shippingMethods.length>0?c(N):c(O,!1)})}var E=r(y,2);{var te=c=>{var u=Ft(),B=a(u,!0);t(u),j(()=>g(B,e(v).shippingMethod)),l(c,u)};T(E,c=>{e(v).shippingMethod&&c(te)})}l(w,b)},$$slots:{default:!0}});var de=r(_e,2);ne(de,{class:"p-8",children:(w,L)=>{var b=Vt(),y=r(U(b),2);{var N=c=>{var u=Ht();be(u,20,()=>d.data.paymentMethods,B=>B,(B,o)=>{var F=Lt(),z=a(F);Pe(z);var X=r(z,2),k=a(X),H=a(k),ae=a(H);{var re=p=>{var q=Dt();l(p,q)};T(ae,p=>{e(M)?.id===o.id&&p(re)})}t(H),t(k);var J=r(k,2),Y=a(J),I=a(Y),W=a(I),le=a(W,!0);t(W);var x=r(W,2),_=a(x,!0);t(x),t(I);var i=r(I,2);{var m=p=>{var q=At(),P=a(q),K=a(P);t(P),t(q),j(()=>g(K,`+${o.feeType==="percentage"?`${o.processingFee}%`:`${o.processingFee} zł`}`)),l(p,q)};T(i,p=>{o.processingFee&&p(m)})}t(Y),t(J),t(X),t(F),j(()=>{pe(F,1,`payment-method-card ${e(M)?.id===o.id?"selected":""}`,"svelte-jbcej5"),Te(z,o.code||o.id),Ie(z,e(M)?.id===o.id),pe(H,1,`w-4 h-4 border-2 border-neutral-300 rounded-full relative ${e(M)?.id===o.id?"border-orange-600":""}`),g(le,o.name),g(_,o.description)}),ye("change",z,()=>oe(M,o,!0)),l(B,F)}),t(u),l(c,u)},O=c=>{var u=It();l(c,u)};T(y,c=>{d.data.paymentMethods&&d.data.paymentMethods.length>0?c(N):c(O,!1)})}var E=r(y,2);{var te=c=>{var u=Wt(),B=a(u,!0);t(u),j(()=>g(B,e(v).paymentMethod)),l(c,u)};T(E,c=>{e(v).paymentMethod&&c(te)})}l(w,b)},$$slots:{default:!0}});var Me=r(de,2);ne(Me,{class:"p-8",children:(w,L)=>{var b=Ot(),y=r(U(b),2);pt(y),j(()=>Te(y,s.notes)),ye("input",y,N=>s.notes=N.currentTarget.value),l(w,b)},$$slots:{default:!0}}),t($);var ve=r($,2),Ae=a(ve),Qe=a(Ae);ne(Qe,{class:"p-8",children:(w,L)=>{var b=Et(),y=r(U(b),2);be(y,5,me,x=>x,(x,_)=>{var i=Kt(),m=a(i);{var p=G=>{var ee=Ut(),ce=a(ee);t(ee),j(()=>{We(ce,"src",e(_).image),We(ce,"alt",e(_).name)}),l(G,ee)},q=G=>{var ee=Xt();l(G,ee)};T(m,G=>{e(_).image?G(p):G(q,!1)})}var P=r(m,2),K=a(P),S=a(K,!0);t(K);var D=r(K,2),Z=a(D);t(D);var se=r(D,2),Ce=a(se);t(se),t(P),t(i),j(G=>{g(S,e(_).name),g(Z,`Ilość: ${e(_).quantity??""}`),g(Ce,`${G??""} zł`)},[()=>(e(_).price*e(_).quantity).toFixed(2)]),l(x,i)}),t(y);var N=r(y,2),O=a(N),E=r(a(O),2),te=a(E);t(E),t(O);var c=r(O,2),u=r(a(c),2),B=a(u,!0);t(u),t(c);var o=r(c,2);{var F=x=>{var _=Zt(),i=r(a(_),2),m=a(i);t(i),t(_),j(p=>g(m,`${p??""} zł`),[()=>e(ke).toFixed(2)]),l(x,_)};T(o,x=>{e(ke)>0&&x(F)})}var z=r(o,2),X=r(a(z),2),k=a(X);t(X),t(z);var H=r(z,2),ae=r(a(H),2),re=a(ae);t(ae),t(H),t(N);var J=r(N,2);Se(J,{type:"submit",fullWidth:!0,size:"lg",get disabled(){return e(xe)},class:"mt-8 bg-gradient-to-r from-brand-600 to-accent-600 hover:from-blue-700 hover:to-accent-700 text-white font-bold py-4 rounded-2xl shadow-lg transform hover:scale-105 transition-all duration-300 text-lg",children:(x,_)=>{var i=mt(),m=U(i);{var p=P=>{var K=$t();ue(),l(P,K)},q=P=>{var K=Rt();ue(),l(P,K)};T(m,P=>{e(xe)?P(p):P(q,!1)})}l(x,i)},$$slots:{default:!0}});var Y=r(J,2),I=r(a(Y),2),W=r(a(I),2),le=r(a(W));le.nodeValue="  i  ",ue(),t(W),t(I),t(Y),j((x,_,i,m)=>{g(te,`${x??""} zł`),pe(u,1,`font-semibold ${e(fe)===0?"text-green-600":"text-neutral-900"}`),g(B,_),g(k,`${i??""} zł`),g(re,`${m??""} zł`)},[()=>e(ie).toFixed(2),()=>e(fe)===0?"Darmowa":`${e(fe).toFixed(2)} zł`,()=>e(ze).toFixed(2),()=>e(Be).toFixed(2)]),l(w,b)},$$slots:{default:!0}}),t(Ae),t(ve),t(h),ft(h,(w,L)=>ht?.(w,L),()=>({formData:w})=>Ke()?(oe(xe,!0),w.append("items",JSON.stringify(me().map(L=>({productId:L.productId,name:L.name,price:L.price,quantity:L.quantity})))),w.append("subtotal",e(ie).toString()),w.append("shippingCost",e(fe).toString()),w.append("tax",e(ze).toString()),w.append("total",e(Be).toString()),async({result:L,update:b})=>{oe(xe,!1),L.type==="redirect"&&Ne.clear(),await b()}):async()=>{}),l(f,C)};T(Re,f=>{me().length===0?f(Ee):f(Je,!1)})}t(De),t(je);var Ye=r(je,2);{var Ge=f=>{var C=Yt(),h=r(a(C),2),$=a(h,!0);t(h),t(C),j(()=>g($,d.form.message)),l(f,C)};T(Ye,f=>{d.form?.message&&f(Ge)})}l(Oe,Fe),it(),Xe()}tt(["change","input"]);export{ia as component};
